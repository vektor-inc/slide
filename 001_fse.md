---
marp: true
---
<!-- 
theme: vk-slide
size: 16:9
paginate: true
style: |
_paginate: false 
-->
<!-- _class: title -->
<!-- Scoped style -->



<!-- _class: title -->
![bg](themes/vk-slide/images/vws_title_01_red.svg)

# ブロックテーマの開発背景と所感

Tokyo WordPress Meetup

---

<!-- _class: title-chapter  -->
<!-- _paginate: false  -->
![bg](themes/vk-slide/images/vws_title_01_lightgray.svg)


# ブロックテーマの所感・課題

---

## ゼロから組み上げるには面倒

PHPの知識はいらないし管理画面から直接改変できる。
だがしかし...

いろんなパーツを全部ゼロから組み上げるのはかなり面倒
<br> 
<p class="alert alert-info">既存テーマを使った方が効率が良いのは従来通り</p>

---

## やはり制作ノウハウは必要

素人がきれいに作るには限界がある
  * ヘッダーなどレスポンシブの対応はCSSの知識は必須
  * レスポンシブの配置調整はデザインスキルも必須

<p class="alert alert-warning">
イラレがあれば誰もがクオリティの高いポスターを作れるわけじゃない</p>

→ プロの仕事はなくならない

---

## 初心者が実案件で使うと行き詰まる

「プログラムの知識不要でテーマが作れる」ように見える

→ 高度なカスタマイズを実装しようとするとブロック開発の知識が必要

<p class="alert alert-warning">とっかかりは簡単だが次のステップへのハードルが高い</p>

---

## 条件分岐で困る

テンプレートがHTMLなのでPHPのように値の有無など気軽に条件分岐ができない

* PHPを含んだブロックを自作で作る必要がある
* たぶん「条件分岐ブロック」とかそのうち出てくると思う。
→ 出てこなければそのうち作ります。

---

## 受託案件で使うのはまだ早い

* FSE自体もβ版
  → まだまだ仕様がかわる
* パンくずリストやレイアウト関連のブロックなど、ビジネスサイトとして必要なパーツが不足している
→ とは言え2022年夏頃には出揃ってくると予想

---

## 汎用テーマじゃなければ難易度は高くない

公式ディレクトリのテーマはエンドユーザーがいろいろ選べるようにパターンが沢山入っているだけ

<p class="alert alert-info">
受託案件なら必要なものだけ作れば良い
</p>

---

## と、思いきやなかなか厄介...

* どんなブロックがあるか？どの程度ブロックで設定できる？
* theme.json で設定できる項目との兼ね合い
* WordPressコアが付与してくるCSSのクセの把握

---

## 親テーマ依存が低い

ヘッダーやフッターなど、少し改変するともう親テーマから分離してしまう

ブロックパターンのように <span class="text-danger">__最初のレイアウトを提供するだけ__</span> に近い存在

---

## テンプレートパーツとパターンの違い

従来の header.php や footer.php などに該当

あくまでそのサイトで実際に同時に使うパーツ

テンプレートパーツの画面に表示させるのはユーザーがそのサイトで実際に使用するものだけ

→ サイトの基本レイアウトとしてどのバリエーションを選択するかはパターンで運用する
→ ヘッダーならページによって「通常」と「背景透過」のバリエーションは在り得るが、フッターの場合色違いなどは発生しない

---

## 個人の感想

* WordPress的にはパターンやブロックのスタイルをあてるのがテーマの役割だと考えているように感じる
→ それもプラグインじゃね？

---

## Lightning の行方

* 別物すぎてすぎてバージョンアップでFSE対応とかそういう次元じゃない
* 出来たとしても互換処理でカオスになりすぎる

→ 別途FSE用のテーマ・プラグインを開発します。
→ 当然有料製品も開発するけど G3 Pro Pack のライセンスで使えるようにするつもりなのでご安心を。

---

<!-- _class: title-chapter  -->
<!-- _paginate: false  -->
![bg](themes/vk-slide/images/vws_title_01_lightgray.svg)


# ちょっと高度なおまけ知識

---

## FSE関連情報の保存先投稿タイプ

改変すると変更内容がDB内（カスタム投稿タイプ）に保存される
（テーマ内のファイルが書き換えられるわけじゃない）

* wp_template：テーマに含めるテンプレート
* wp_template_part：テンプレートに含めるテンプレートパーツ
* wp_global_styles：現在のテーマに対してサイト管理者によって作成および保存されたスタイル
* wp_navigation：サイトに挿入できるナビゲーションメニュー

---

## 各種設定を theme.json で一元管理

こちらが詳しい
https://qiita.com/TetsuakiHamano/items/1cff973739039e5efc18

---

* theme.json にテンプレート名を書くと表示名を指定できる
* 編集したしたテンプレートパーツは提供中のテーマに紐付いているのでテーマを切り替えると表示されなくなる（5.9現在）

---

<!-- _class: title -->
<!-- _paginate: false  -->
![bg](themes/vk-slide/images/vws_title_01_red.svg)

# おしまい

